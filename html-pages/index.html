<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Peptide Hub — Research Peptides</title>
  <style>
    :root{
      --green:#1CB346; --green-d:#0f6b2b; --ink:#0f172a; --muted:#5b6472;
      --card:#ffffff; --radius:22px; --shadow:0 10px 30px rgba(0,0,0,.08); --border:#eef2f0;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:#ffffff;color:var(--ink);font-family:ui-sans-serif,system-ui,-apple-system,Inter,Roboto,Arial}
    a{text-decoration:none;color:inherit}
    img{max-width:100%;display:block}

    /* Header */
    .header{position:sticky;top:0;z-index:30;background:linear-gradient(90deg,var(--green),var(--green-d));color:#fff;border-bottom:1px solid rgba(0,0,0,.04)}
    .nav{max-width:1200px;margin:0 auto;padding:14px 18px;display:flex;align-items:center;gap:14px}
    .nav img.logo{height:32px}
    .nav .spacer{flex:1}
    .nav a{font-weight:700;padding:8px 10px;border-radius:14px;color:#fff;white-space:nowrap}
    .nav a:hover{background:rgba(255,255,255,.12)}
    .cart-wrap{position:relative}
    .cart-link{position:relative;display:inline-flex;align-items:center;gap:8px}
    .badge{position:absolute;top:-6px;right:-8px;background:#fff;color:#0c8a37;font-weight:800;font-size:.72rem;line-height:1;min-width:18px;height:18px;border-radius:999px;display:flex;align-items:center;justify-content:center;padding:2px 4px}

    /* Mini cart */
    .mini{position:absolute;right:0;top:44px;width:min(92vw,360px);background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);display:none}
    .mini.open{display:block}
    .mini-head{padding:12px 14px;border-bottom:1px solid #eef2f0;font-weight:800}
    .mini-list{max-height:60vh;overflow:auto}
    .mini-row{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;padding:10px 14px;border-bottom:1px dashed #e6e9ee}
    .mini-row:last-child{border-bottom:none}
    .mini-thumb{width:48px;height:48px;border-radius:12px;background:#f7faf8;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .mini-name{font-weight:700;font-size:.95rem}
    .mini-muted{color:var(--muted);font-size:.85rem}
    .mini-foot{padding:12px 14px;border-top:1px solid #eef2f0;display:flex;gap:10px;align-items:center;justify-content:space-between}
    .mini-empty{padding:14px;color:var(--muted)}

    /* Toast */
    .toast{position:fixed;z-index:40;left:50%;transform:translateX(-50%);bottom:18px;background:#0f6b2b;color:#fff;padding:10px 14px;border-radius:999px;box-shadow:var(--shadow);opacity:0;pointer-events:none;transition:.25s}
    .toast.show{opacity:1}

    /* Buttons / layout */
    .btn{display:inline-block;background:var(--green);color:#fff;padding:12px 18px;border-radius:16px;font-weight:800;box-shadow:0 8px 20px rgba(28,179,70,.20);transition:.15s ease;text-align:center;border:none;cursor:pointer}
    .btn:hover{background:#17a03f;transform:translateY(-1px)}
    .btn-outline{background:#fff;color:var(--green);border:2px solid var(--green)}
    .container{max-width:1200px;margin:24px auto;padding:0 18px}
    .panel{background:#fff;border:1px solid var(--border);border-radius:22px;box-shadow:var(--shadow);padding:20px}
    .catalog{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .card{background:#fff;border:1px solid var(--border);border-radius:22px;box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}
    .thumb{aspect-ratio:1.1/1;background:#f7faf8;display:flex;align-items:center;justify-content:center;padding:14px}
    .body{padding:14px 16px;display:flex;flex-direction:column;gap:8px}
    .tag{align-self:flex-start;display:inline-block;font-size:.75rem;font-weight:800;color:#0c3820;background:rgba(28,179,70,.12);padding:4px 8px;border-radius:999px}
    .title{font-size:1.05rem;font-weight:800;margin:2px 0 0}
    .desc{color:var(--muted);font-size:.94rem;min-height:44px}
    .price{font-weight:800;margin:2px 0 6px}
    .actions{margin-top:auto;display:flex;gap:10px;flex-wrap:wrap}
  </style>
</head>

<body>
  <header class="header">
    <nav class="nav">
      <a href="index.html" aria-label="Peptide Hub Home"><img class="logo" src="assets/logo.png" alt="Peptide Hub logo" /></a>
      <div class="spacer"></div>
      <a href="#products">Products</a>
      <a href="checkout.html">Checkout</a>
      <a href="legal.html">Legal</a>

      <div class="cart-wrap">
        <a class="cart-link" href="javascript:void(0)" id="cartToggle" aria-label="Cart">
          <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 6h15l-1.5 9h-12z"/><path d="M6 6l-2-2"/><circle cx="9" cy="20" r="1.5"/><circle cx="18" cy="20" r="1.5"/></svg>
          <span class="badge" id="cartBadge">0</span>
        </a>
        <div class="mini" id="miniCart" aria-live="polite">
          <div class="mini-head">Your Cart</div>
          <div class="mini-list" id="miniList"></div>
          <div class="mini-foot">
            <div><strong id="miniTotal">$0.00</strong></div>
            <div style="display:flex;gap:8px">
              <button class="btn-outline" id="miniClear">Clear</button>
              <a class="btn" href="checkout.html">Checkout</a>
            </div>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <section class="container">
    <div class="panel">
      <span style="display:inline-block;font-size:.8rem;letter-spacing:.12em;font-weight:800;color:var(--green);background:rgba(28,179,70,.12);padding:6px 10px;border-radius:999px">PEPTIDE HUB</span>
      <h1 style="font-size:clamp(28px,4vw,44px);margin:14px 0 8px">High-Purity Research Peptides — Delivered Fast</h1>
      <p style="color:var(--muted);font-size:clamp(14px,2.2vw,18px);max-width:780px">Built for scientists and researchers who need consistent results: clean labels, clear doses, and fast, reliable fulfillment. Research-grade only. Not for human consumption.</p>
      <div style="display:flex;gap:12px;margin-top:18px;flex-wrap:wrap">
        <a class="btn" href="#products">Browse Products</a>
        <a class="btn btn-outline" href="checkout.html">Go to Checkout</a>
      </div>
    </div>
  </section>

  <section id="products" class="container">
    <h3 style="font-weight:800;letter-spacing:.04em;margin:0 0 12px;color:#0f172a">PRODUCT CATALOG</h3>
    <div class="catalog" id="catalog"></div>
  </section>

  <footer class="container" style="margin-top:8px">
    <div class="panel" style="color:#334155"><strong>Legal:</strong> For research purposes only. Not for human consumption. Must be 21+ to purchase.</div>
  </footer>

  <div class="toast" id="toast">Added to cart</div>

  <script>
    const PRODUCTS = [
      {id:'retatrutide', name:'Retatrutide', size:'10 mg', price:289.99, img:'assets/retatrutide.png'},
      {id:'bpc-157', name:'BPC-157', size:'5 mg', price:119.99, img:'assets/bpc-157.png'},
      {id:'tb-500', name:'TB 500', size:'5 mg', price:149.99, img:'assets/tb-500.png'},
      {id:'hcg', name:'hCG', size:'5000 IU', price:79.99, img:'assets/hcg.png'},
      {id:'bac-water', name:'Bacteriostatic Water', size:'10 mL', price:9.99, img:'assets/bac-water.png'},
      {id:'ipamorelin', name:'Ipamorelin', size:'5 mg', price:89.99, img:'assets/ipamorelin.png'},
      {id:'melanotan-2', name:'Melanotan 2', size:'10 mg', price:99.99, img:'assets/melanotan-2.png'},
      {id:'cjc-1295-dac', name:'CJC-1295 DAC', size:'5 mg', price:129.99, img:'assets/cjc-1295-dac.png'},
    ];
    const CART_KEY='ph_cart', money=n=>`$${n.toFixed(2)}`;
    const $=(q)=>document.querySelector(q);

    function getCart(){ try{return JSON.parse(localStorage.getItem(CART_KEY))||[]}catch{ return [] } }
    function setCart(items){ localStorage.setItem(CART_KEY, JSON.stringify(items)); updateBadge(); drawMini(); }
    function addToCart(id, qty=1){
      const p = PRODUCTS.find(x=>x.id===id); if(!p) return;
      const cart = getCart(); const i = cart.findIndex(c=>c.id===id);
      if(i>-1) cart[i].qty += qty; else cart.push({...p, qty});
      setCart(cart);
      showToast();
    }
    function updateBadge(){ $('#cartBadge').textContent = getCart().reduce((a,b)=>a+b.qty,0); }

    function drawCatalog(){
      const el = $('#catalog');
      el.innerHTML = PRODUCTS.map(p=>`
        <article class="card">
          <div class="thumb"><img src="${p.img}" alt="${p.name} ${p.size}"></div>
          <div class="body">
            <span class="tag">${p.size}</span>
            <div class="title">${p.name}</div>
            <div class="desc">Research use only. Not for human consumption.</div>
            <div class="price">${money(p.price)}</div>
            <div class="actions">
              <button class="btn" data-buy="${p.id}">Buy Now</button>
              <button class="btn btn-outline" data-add="${p.id}">Add to Cart</button>
            </div>
          </div>
        </article>
      `).join('');
      el.querySelectorAll('[data-buy]').forEach(b=>b.addEventListener('click',e=>{
        addToCart(e.currentTarget.dataset.buy,1);
        location.href='checkout.html';
      }));
      el.querySelectorAll('[data-add]').forEach(b=>b.addEventListener('click',e=>{
        addToCart(e.currentTarget.dataset.add,1);
      }));
    }

    /* Mini cart */
    function drawMini(){
      const list = $('#miniList');
      const items = getCart();
      if(!items.length){ list.innerHTML = `<div class="mini-empty">Your cart is empty.</div>`; $('#miniTotal').textContent='$0.00'; return; }
      list.innerHTML = items.map(i=>`
        <div class="mini-row">
          <div class="mini-thumb"><img src="${i.img}" alt="${i.name} ${i.size}"></div>
          <div><div class="mini-name">${i.name}</div><div class="mini-muted">${i.size} · ${money(i.price)}</div></div>
          <div class="mini-muted">×${i.qty}</div>
        </div>
      `).join('');
      const total = items.reduce((s,i)=>s+i.price*i.qty,0);
      $('#miniTotal').textContent = money(total);
    }
    $('#cartToggle').addEventListener('click', ()=>{
      $('#miniCart').classList.toggle('open');
    });
    document.addEventListener('click',(e)=>{
      if(!e.target.closest('.cart-wrap')) $('#miniCart').classList.remove('open');
    });
    $('#miniClear').addEventListener('click', ()=>setCart([]));

    /* Toast */
    let toastTimer=null;
    function showToast(){
      const t = $('#toast'); t.classList.add('show');
      clearTimeout(toastTimer); toastTimer=setTimeout(()=>t.classList.remove('show'),1300);
    }

    drawCatalog(); updateBadge(); drawMini();
  </script>
</body>
</html>
